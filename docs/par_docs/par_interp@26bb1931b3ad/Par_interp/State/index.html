<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>State (par_interp@26bb1931b3ad.Par_interp.State)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">par_interp@26bb1931b3ad</a> &#x00BB; <a href="../index.html">Par_interp</a> &#x00BB; State</nav><h1>Module <code>Par_interp.State</code></h1></header><aside><p>Implementation of the state and the functions acting on it.</p></aside><dl><dt class="spec exception" id="exception-Last_executed_stmt_not_found"><a href="#exception-Last_executed_stmt_not_found" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Last_executed_stmt_not_found</span></code></dt><dt class="spec exception" id="exception-Last_executed_thread_not_found"><a href="#exception-Last_executed_thread_not_found" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Last_executed_thread_not_found</span></code></dt></dl><dl><dt class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><code><span class="keyword">type</span> state</code><code> = </code><table class="variant"><tr id="type-state.State" class="anchored"><td class="def constructor"><a href="#type-state.State" class="anchor"></a><code>| </code><code><span class="constructor">State</span> <span class="keyword">of</span> <span><a href="../Thread/index.html#type-thread">Thread.thread</a> list</span> * <span><a href="../Thread/index.html#type-thread">Thread.thread</a> list</span> * int * int * <a href="../Sigma/index.html#type-sigma">Sigma.sigma</a> * <a href="../Delta/index.html#type-delta">Delta.delta</a></code></td></tr></table></dt><dd><p><code>state</code> is a type consisting of a tuple including:</p><ol><li>running_threads (the list of threads currently executing);</li><li>waiting_threads (the list of threads that generated the threads in <code>running_threads</code>, waiting for their children to finish their execution before resuming their own execution by moving back to <code>running_threads</code>;</li><li>num_curr_stmt: an integer counting the number of statements executed so far, used to annotate statements as they are executed;</li><li>num_curr_thread: an integer counting the number of created threads (both active and killed), used to assign an ID to each thread upon creation; whenever the root thread reaches its program's last statement (or the first one, if in reverse execution), this value is reset to the initial value (<a href="index.html#val-root_tid_value"><code>root_tid_value</code></a> + 1, that is.)</li><li>The program store (sigma);</li><li>The auxiliary store (delta).</li></ol></dd></dl><dl><dt class="spec value" id="val-first_stmt_value"><a href="#val-first_stmt_value" class="anchor"></a><code><span class="keyword">val</span> first_stmt_value : int</code></dt><dd><p>Value used to initialize state's <code>num_curr_stmt</code> value.</p></dd></dl><dl><dt class="spec value" id="val-root_tid_value"><a href="#val-root_tid_value" class="anchor"></a><code><span class="keyword">val</span> root_tid_value : int</code></dt><dd><p>Value used to set the root thread ID, and to initialize state's <code>num_curr_thread</code> value (<code>root_tid_value</code> + 1).</p></dd></dl><dl><dt class="spec value" id="val-dassign_fwd"><a href="#val-dassign_fwd" class="anchor"></a><code><span class="keyword">val</span> dassign_fwd : <span>ide_name:<a href="../Ast/index.html#type-ide">Ast.ide</a></span> <span>&#45;&gt;</span> <span>new_value:int</span> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Executes a destructive assignment in forward execution mode, assigning <code>new_value</code> to the variable <code>ide_name</code>.</p><p>In order to preserve <code>ide_name</code>'s current value, <code>curr_value</code> is retrieved from the sigma store and pushed onto <code>ide_name</code>'s stack in the auxiliary delta store; at that point, <code>ide_name</code>'s value in the sigma store can be overwritten with <code>new_value</code>, and the resulting new state is returned.</p></dd></dl><dl><dt class="spec value" id="val-dassign_rev"><a href="#val-dassign_rev" class="anchor"></a><code><span class="keyword">val</span> dassign_rev : <span>ide_name:<a href="../Ast/index.html#type-ide">Ast.ide</a></span> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Executes a destructive assignment in reverse execution mode.</p><p><code>ide_name</code>'s previous value (<code>retrieved_value</code>) is retrieved from <code>ide_name</code>'s stack in the auxiliary delta store, and <code>retrieved_value</code> gets popped (removed) from <code>ide_name</code>'s stack; at that point, <code>retrieved_value</code> is assigned to <code>ide_name</code> in the sigma store, and the resulting new state is returned.</p></dd></dl><dl><dt class="spec value" id="val-cadd"><a href="#val-cadd" class="anchor"></a><code><span class="keyword">val</span> cadd : <a href="../Ast/index.html#type-ide">Ast.ide</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>This is a wrapper which applies <a href="../Sigma/index.html#val-cadd"><code>Sigma.cadd</code></a> to the sigma store contained inside the specified state parameter, and returns the resulting state.</p></dd></dl><dl><dt class="spec value" id="val-csub"><a href="#val-csub" class="anchor"></a><code><span class="keyword">val</span> csub : <a href="../Ast/index.html#type-ide">Ast.ide</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>This is a wrapper which applies <a href="../Sigma/index.html#val-csub"><code>Sigma.csub</code></a> to the sigma store contained inside the specified state parameter, and returns the resulting state.</p></dd></dl><dl><dt class="spec value" id="val-get_running_thread"><a href="#val-get_running_thread" class="anchor"></a><code><span class="keyword">val</span> get_running_thread : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Thread/index.html#type-thread">Thread.thread</a></code></dt><dd><p>Returns the running thread with the given ID contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-add_running_thread"><a href="#val-add_running_thread" class="anchor"></a><code><span class="keyword">val</span> add_running_thread : <a href="../Thread/index.html#type-thread">Thread.thread</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Adds a thread to the list of running threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-update_running_thread"><a href="#val-update_running_thread" class="anchor"></a><code><span class="keyword">val</span> update_running_thread : <a href="../Thread/index.html#type-thread">Thread.thread</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Updates (replaces) a thread in the list of running threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-new_running_thread"><a href="#val-new_running_thread" class="anchor"></a><code><span class="keyword">val</span> new_running_thread : <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../Program/index.html#type-child_branch">Program.child_branch</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a program, a parent thread ID, a branch and a state, creates a new thread containing the given program in the list of running threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-remove_running_thread"><a href="#val-remove_running_thread" class="anchor"></a><code><span class="keyword">val</span> remove_running_thread : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Removes the thread with the given ID from the list of running threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-get_waiting_thread"><a href="#val-get_waiting_thread" class="anchor"></a><code><span class="keyword">val</span> get_waiting_thread : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Thread/index.html#type-thread">Thread.thread</a></code></dt><dd><p>Returns the waiting thread with the given ID contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-add_waiting_thread"><a href="#val-add_waiting_thread" class="anchor"></a><code><span class="keyword">val</span> add_waiting_thread : <a href="../Thread/index.html#type-thread">Thread.thread</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Adds a thread to the list of waiting threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-update_waiting_thread"><a href="#val-update_waiting_thread" class="anchor"></a><code><span class="keyword">val</span> update_waiting_thread : <a href="../Thread/index.html#type-thread">Thread.thread</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Updates (replaces) a thread in the list of waiting threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-remove_waiting_thread"><a href="#val-remove_waiting_thread" class="anchor"></a><code><span class="keyword">val</span> remove_waiting_thread : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Removes the thread with the given ID from the list of waiting threads inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-set_thread_as_waiting"><a href="#val-set_thread_as_waiting" class="anchor"></a><code><span class="keyword">val</span> set_thread_as_waiting : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Moves the thread with the given ID from the list of running threads to the list of waiting threads.</p></dd></dl><dl><dt class="spec value" id="val-set_thread_as_running"><a href="#val-set_thread_as_running" class="anchor"></a><code><span class="keyword">val</span> set_thread_as_running : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Moves the thread with the given ID from the list of waiting threads to the list of running threads.</p></dd></dl><dl><dt class="spec value" id="val-get_stmt_counter"><a href="#val-get_stmt_counter" class="anchor"></a><code><span class="keyword">val</span> get_stmt_counter : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the statement counter (the number of statements executed thus far) contained in the state passed as a parameter.</p></dd></dl><dl><dt class="spec value" id="val-push_stmt_counter"><a href="#val-push_stmt_counter" class="anchor"></a><code><span class="keyword">val</span> push_stmt_counter : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Pushes the statement counter in the source code stack of the current instruction in the program contained in the specified running thread ID.</p></dd></dl><dl><dt class="spec value" id="val-pop_prev_stmt_counter"><a href="#val-pop_prev_stmt_counter" class="anchor"></a><code><span class="keyword">val</span> pop_prev_stmt_counter : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Pops (removes) the statement counter from the top of the source code stack of the previous instruction in the program contained in the specified running thread ID.</p></dd></dl><dl><dt class="spec value" id="val-get_sigma"><a href="#val-get_sigma" class="anchor"></a><code><span class="keyword">val</span> get_sigma : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Sigma/index.html#type-sigma">Sigma.sigma</a></code></dt><dd><p>Returns the sigma store contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a> <span>&#45;&gt;</span> <a href="../Sigma/index.html#type-sigma">Sigma.sigma</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Takes a program and an initial sigma store as parameters, and returns a state with</p><ul><li>A list of active threads initialized with a root thread containing the given program;</li><li>An empty list of waiting threads;</li><li><code>num_curr_stmt</code> initialized to <code>first_stmt_value</code>;</li><li><code>num_curr_thread</code> initialized to <code>root_tid_value</code> + 1;</li><li>The given sigma store;</li><li>An empty auxiliary (delta) store.</li></ul></dd></dl><dl><dt class="spec value" id="val-prev_stmt"><a href="#val-prev_stmt" class="anchor"></a><code><span class="keyword">val</span> prev_stmt : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>This is a wrapper which applies <a href="../Thread/index.html#val-prev_stmt"><code>Thread.prev_stmt</code></a> to the thread having the specified running thread ID contained inside the specified state parameter, and returns the resulting state.</p></dd></dl><dl><dt class="spec value" id="val-get_prev_stmt"><a href="#val-get_prev_stmt" class="anchor"></a><code><span class="keyword">val</span> get_prev_stmt : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-stmt_ann">Ast_ann.stmt_ann</a></code></dt><dd><p>This is a wrapper which applies <a href="../Thread/index.html#val-get_prev_stmt"><code>Thread.get_prev_stmt</code></a> to the thread having the specified running thread ID contained inside the specified state parameter, and returns the resulting state.</p></dd></dl><dl><dt class="spec value" id="val-get_curr_stmt"><a href="#val-get_curr_stmt" class="anchor"></a><code><span class="keyword">val</span> get_curr_stmt : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-stmt_ann">Ast_ann.stmt_ann</a></code></dt><dd><p>This is a wrapper which applies <a href="../Thread/index.html#val-get_curr_stmt"><code>Thread.get_curr_stmt</code></a> to the running thread with the given ID contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-next_stmt"><a href="#val-next_stmt" class="anchor"></a><code><span class="keyword">val</span> next_stmt : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>This is a wrapper which applies <a href="../Thread/index.html#val-next_stmt"><code>Thread.next_stmt</code></a> to the running thread with the given ID contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-get_child_threads_from_list"><a href="#val-get_child_threads_from_list" class="anchor"></a><code><span class="keyword">val</span> get_child_threads_from_list : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Thread/index.html#type-thread">Thread.thread</a> * <a href="../Thread/index.html#type-thread">Thread.thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Thread/index.html#val-get_child_threads_from_list"><code>Thread.get_child_threads_from_list</code></a> to the running threads' list contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-remove_child_threads_from_list"><a href="#val-remove_child_threads_from_list" class="anchor"></a><code><span class="keyword">val</span> remove_child_threads_from_list : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>This is a wrapper which applies <a href="../Thread/index.html#val-remove_child_threads_from_list"><code>Thread.remove_child_threads_from_list</code></a> to the running threads' list contained inside the specified state parameter.</p></dd></dl><dl><dt class="spec value" id="val-get_last_executed_thread"><a href="#val-get_last_executed_thread" class="anchor"></a><code><span class="keyword">val</span> get_last_executed_thread : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="../Thread/index.html#type-thread">Thread.thread</a></code></dt><dd><p>Given a state, searches the thread which performed the last statement execution among the running threads and returns it.</p><dl><dt>raises Last_executed_thread_not_found</dt><dd><p>if no thread among the running threads performed the last execution.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-inc_prev_par_finished_children"><a href="#val-inc_prev_par_finished_children" class="anchor"></a><code><span class="keyword">val</span> inc_prev_par_finished_children : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a waiting thread ID whose program's previous statement is <code>Par</code> and a state, increments <code>Par</code>'s <code>num_chld_done</code> field by 1.</p></dd></dl><dl><dt class="spec value" id="val-dec_prev_par_finished_children"><a href="#val-dec_prev_par_finished_children" class="anchor"></a><code><span class="keyword">val</span> dec_prev_par_finished_children : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a waiting thread ID whose program's previous statement is <code>Par</code> and a state, decrements <code>Par</code>'s <code>num_chld_done</code> field by 1.</p></dd></dl><dl><dt class="spec value" id="val-adjust_state_for_rev_semantics"><a href="#val-adjust_state_for_rev_semantics" class="anchor"></a><code><span class="keyword">val</span> adjust_state_for_rev_semantics : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a state, returns an adjusted state to use before performing a single step in reverse execution mode, so that <a href="index.html#val-get_last_executed_thread"><code>get_last_executed_thread</code></a> is guaranteed to find the thread which executed last among the running threads:</p><ul><li>If the state's current statement is the first one in the root thread, or the last executed statement is in a thread which is running already, then no adjustment is necessary (the state is returned as-is);</li><li>If the last executed statement is in the waiting threads, it means that the last executed instruction was <code>Par</code>: the child threads which have just been created as a result of the <code>Par</code> statement execution must be removed after putting their programs back in Par (in order to guarantee that <code>Par</code>'s programs are &quot;rewound&quot; back to the beginning), and the waiting thread must be moved back to the running threads' list;</li><li>If the last executed statement is found inside one of the programs contained inside a waiting thread's <code>Par</code> statement, it means a child thread has terminated in the previous statement execution: another thread is created in the running threads, containing the program found inside the waiting thread's <code>Par</code> statement.</li></ul><dl><dt>raises Last_executed_stmt_not_found</dt><dd><p>if the last executed statement couldn't be found anywhere.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-inc_num_stmts"><a href="#val-inc_num_stmts" class="anchor"></a><code><span class="keyword">val</span> inc_num_stmts : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a state, increments <code>num_curr_stmt</code>.</p></dd></dl><dl><dt class="spec value" id="val-dec_num_stmts"><a href="#val-dec_num_stmts" class="anchor"></a><code><span class="keyword">val</span> dec_num_stmts : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a state, decrements <code>num_curr_stmt</code>.</p></dd></dl><dl><dt class="spec value" id="val-inc_num_threads"><a href="#val-inc_num_threads" class="anchor"></a><code><span class="keyword">val</span> inc_num_threads : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a state, increments <code>num_curr_thread</code>.</p></dd></dl><dl><dt class="spec value" id="val-dec_num_threads"><a href="#val-dec_num_threads" class="anchor"></a><code><span class="keyword">val</span> dec_num_threads : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a state, decrements <code>num_curr_thread</code>.</p></dd></dl><dl><dt class="spec value" id="val-reset_num_threads"><a href="#val-reset_num_threads" class="anchor"></a><code><span class="keyword">val</span> reset_num_threads : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a state, resets the <code>num_threads</code> value to the initial value. Used when the program execution reaches the end in forward execution mode or the beginning in reverse execution mode, since at those points we know the only active thread is the root thread (and therefore <code>num_threads</code> can be reset to the value coming after <code>root_tid_value</code>, since it won't overlap with any existing threads' IDs.)</p></dd></dl><dl><dt class="spec value" id="val-move_to_next_stmt"><a href="#val-move_to_next_stmt" class="anchor"></a><code><span class="keyword">val</span> move_to_next_stmt : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a thread ID and a state, performs the following operations:</p><ol><li>Pushes the statement counter onto the current statement's source code stack;</li><li>Increments the state's statement counter by 1;</li><li>Moves the current instruction of the program contained in the given thread ID to the next instruction;</li><li>Returns the updated state.</li></ol></dd></dl><dl><dt class="spec value" id="val-move_to_prev_stmt"><a href="#val-move_to_prev_stmt" class="anchor"></a><code><span class="keyword">val</span> move_to_prev_stmt : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Given a thread ID and a state, performs the following operations:</p><ol><li>Pops (removes) the statement counter from the current statement's source code stack;</li><li>Decrements the state's statement counter by 1;</li><li>Moves the current instruction of the program contained in the given thread ID to the previous instruction;</li><li>Returns the updated state.</li></ol></dd></dl><dl><dt class="spec value" id="val-handle_finished_par_thread_fwd"><a href="#val-handle_finished_par_thread_fwd" class="anchor"></a><code><span class="keyword">val</span> handle_finished_par_thread_fwd : <span>tid:int</span> <span>&#45;&gt;</span> <span>state:<a href="index.html#type-state">state</a></span> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p>Handles the forward execution of statement <span class="xref-unresolved" title="unresolved reference to &quot;Program_ann.Par_prg_end&quot;"><code>Program_ann</code>.Par_prg_end</span> (that is, a child thread terminated its program execution) at state level.</p><p>The following steps are performed:</p><ol><li>The child thread and the parent thread are retrieved from the state;</li><li>The child thread's program is put into the <code>Par</code> statement contained in the parent thread's program, by calling <a href="../Thread/index.html#val-update_par_prg_fwd"><code>Thread.update_par_prg_fwd</code></a>;</li><li>The child thread is removed from the running threads (since it terminated its execution);</li><li>The parent thread is removed from the waiting threads (since it must be replaced by the updated version);</li><li>The updated parent thread is added to the state; if all of its child threads finished their execution, the parent thread is placed in the running threads' list and its current program statement advances to the next statement, otherwise it's placed in the waiting threads' list.</li></ol><dl><dt>parameter tid</dt><dd><p>The thread ID of the child thread which terminated its execution.</p></dd></dl><dl><dt>parameter state</dt><dd><p>The state to update.</p></dd></dl><dl><dt>returns</dt><dd><p>The updated state.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-is_prg_at_start"><a href="#val-is_prg_at_start" class="anchor"></a><code><span class="keyword">val</span> is_prg_at_start : <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Returns a boolean value indicating whether the program's current statement/instruction in the given <code>state</code> is the main program's first statement/instruction.</p></dd></dl><dl><dt class="spec value" id="val-is_thread_at_end"><a href="#val-is_thread_at_end" class="anchor"></a><code><span class="keyword">val</span> is_thread_at_end : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Given a thread ID and a state, returns a boolean value indicating whether the program contained in the given thread is the main program's last statement/instruction.</p></dd></dl><dl><dt class="spec value" id="val-is_thread_running"><a href="#val-is_thread_running" class="anchor"></a><code><span class="keyword">val</span> is_thread_running : int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Given a thread ID and a state, returns <code>true</code> if a thread with the given ID is found in the running threads' list, <code>false</code> otherwise.</p></dd></dl></div></body></html>