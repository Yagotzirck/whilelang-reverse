<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Thread (par_interp@26bb1931b3ad.Par_interp.Thread)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">par_interp@26bb1931b3ad</a> &#x00BB; <a href="../index.html">Par_interp</a> &#x00BB; Thread</nav><h1>Module <code>Par_interp.Thread</code></h1></header><aside><p>Implementation of the thread data type and the functions acting on it.</p></aside><dl><dt class="spec exception" id="exception-Thread_not_found"><a href="#exception-Thread_not_found" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Thread_not_found</span> <span class="keyword">of</span> string</code></dt><dd><p>The string argument indicates the function where the exception has occurred.</p></dd></dl><dl><dt class="spec type" id="type-thread"><a href="#type-thread" class="anchor"></a><code><span class="keyword">type</span> thread</code><code> = </code><table class="variant"><tr id="type-thread.Thread" class="anchored"><td class="def constructor"><a href="#type-thread.Thread" class="anchor"></a><code>| </code><code><span class="constructor">Thread</span> <span class="keyword">of</span> <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a> * int * int * <a href="../Program/index.html#type-child_branch">Program.child_branch</a></code></td></tr></table></dt><dd><p>A thread is a tuple containing the following fields:</p><ol><li><code>prg</code>: The annotated program associated to the thread;</li><li><code>tid</code>: An integer value that uniquely identifies the thread;</li><li><code>ptid</code>: An integer value that identifies the parent thread's ID (that is, the <code>tid</code> of the thread that generated this thread);</li><li><code>branch</code>: A variable of type <code>child_branch</code>, indicating whether the thread is a <code>Left</code> child, a <code>Right</code> child, or the <code>Root</code> thread;</li></ol></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../Program/index.html#type-child_branch">Program.child_branch</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>Creates and returns a new thread, initializing it with the given parameters (annotated program, thread id, id of the thread who requested the creation, and branch).</p></dd></dl><dl><dt class="spec value" id="val-get_program"><a href="#val-get_program" class="anchor"></a><code><span class="keyword">val</span> get_program : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a></code></dt><dd><p>Given a thread, returns the annotated program contained in it.</p></dd></dl><dl><dt class="spec value" id="val-get_tid"><a href="#val-get_tid" class="anchor"></a><code><span class="keyword">val</span> get_tid : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Given a thread, returns its thread ID.</p></dd></dl><dl><dt class="spec value" id="val-get_ptid"><a href="#val-get_ptid" class="anchor"></a><code><span class="keyword">val</span> get_ptid : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Given a thread, returns its parent thread ID.</p></dd></dl><dl><dt class="spec value" id="val-get_child_branch"><a href="#val-get_child_branch" class="anchor"></a><code><span class="keyword">val</span> get_child_branch : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="../Program/index.html#type-child_branch">Program.child_branch</a></code></dt><dd><p>Given a thread, returns its child branch (Left, Right, or Root.)</p></dd></dl><dl><dt class="spec value" id="val-update_par_prg"><a href="#val-update_par_prg" class="anchor"></a><code><span class="keyword">val</span> update_par_prg : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>Given a child thread and its parent thread, puts the child thread's program into the <code>Par</code> statement contained in the parent thread's program.</p><p>The following steps are performed:</p><ol><li>The child thread branch is retrieved, in order to determine whether the program contained in the child thread belongs to the first or the second program inside the <span class="xref-unresolved" title="unresolved reference to &quot;Program.Par&quot;"><a href="../index.html#module-Program"><code>Program</code></a>.Par</span> statement of the parent thread;</li><li>The <span class="xref-unresolved" title="unresolved reference to &quot;Program.Par&quot;"><a href="../index.html#module-Program"><code>Program</code></a>.Par</span> program branch contained in the parent thread is updated, according to the branch retrieved from the previous step.</li></ol><dl><dt>parameter t_chld</dt><dd><p>The child thread containing the program to put inside <code>t_parent</code>'s <code>Par</code> statement.</p></dd></dl><dl><dt>parameter t_parent</dt><dd><p>The parent thread whose current statement is the <code>Par</code> statement to be updated with the finished child thread's program.</p></dd></dl><dl><dt>returns</dt><dd><p>The updated parent thread.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-update_par_prg_fwd"><a href="#val-update_par_prg_fwd" class="anchor"></a><code><span class="keyword">val</span> update_par_prg_fwd : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>Same as <a href="index.html#val-update_par_prg"><code>update_par_prg</code></a>, but additionally increments <code>Par</code>'s <code>num_chld_done</code> field in the parent program by 1.</p></dd></dl><dl><dt class="spec value" id="val-is_children_execution_done"><a href="#val-is_children_execution_done" class="anchor"></a><code><span class="keyword">val</span> is_children_execution_done : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Given a waiting thread, returns a boolean value indicating whether its children are done with their execution (<code>true</code>) or not (<code>false</code>).</p><p>This is a wrapper which applies <a href="../Program/index.html#val-is_children_execution_done"><code>Program.is_children_execution_done</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-prev_stmt"><a href="#val-prev_stmt" class="anchor"></a><code><span class="keyword">val</span> prev_stmt : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-prev_stmt"><code>Program.prev_stmt</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-get_prev_stmt"><a href="#val-get_prev_stmt" class="anchor"></a><code><span class="keyword">val</span> get_prev_stmt : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-stmt_ann">Ast_ann.stmt_ann</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-get_prev_stmt"><code>Program.get_prev_stmt</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-get_curr_stmt"><a href="#val-get_curr_stmt" class="anchor"></a><code><span class="keyword">val</span> get_curr_stmt : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-stmt_ann">Ast_ann.stmt_ann</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-get_curr_stmt"><code>Program.get_curr_stmt</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-next_stmt"><a href="#val-next_stmt" class="anchor"></a><code><span class="keyword">val</span> next_stmt : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-next_stmt"><code>Program.next_stmt</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-push_stmt_counter"><a href="#val-push_stmt_counter" class="anchor"></a><code><span class="keyword">val</span> push_stmt_counter : int <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-push_stmt_counter"><code>Program.push_stmt_counter</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-top_prev_stmt_counter"><a href="#val-top_prev_stmt_counter" class="anchor"></a><code><span class="keyword">val</span> top_prev_stmt_counter : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> int</code></dt><dd><p>This is a wrapper which applies <span class="xref-unresolved" title="unresolved reference to &quot;Program.top_stmt_counter&quot;"><a href="../index.html#module-Program"><code>Program</code></a>.top_stmt_counter</span> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-pop_prev_stmt_counter"><a href="#val-pop_prev_stmt_counter" class="anchor"></a><code><span class="keyword">val</span> pop_prev_stmt_counter : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-pop_prev_stmt_counter"><code>Program.pop_prev_stmt_counter</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-get_thread_from_list"><a href="#val-get_thread_from_list" class="anchor"></a><code><span class="keyword">val</span> get_thread_from_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>Given a thread ID and a list of threads, returns the thread in the list matching the ID passed as a parameter, or raises <code>Thread_not_found</code> if no thread ID matches the given one.</p></dd></dl><dl><dt class="spec value" id="val-remove_thread_from_list"><a href="#val-remove_thread_from_list" class="anchor"></a><code><span class="keyword">val</span> remove_thread_from_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span></code></dt><dd><p>Given a thread ID and a list of threads, removes the thread from the list matching the ID passed as a parameter, or raises <code>Thread_not_found</code> if no thread ID matches the given one.</p></dd></dl><dl><dt class="spec value" id="val-update_thread_in_list"><a href="#val-update_thread_in_list" class="anchor"></a><code><span class="keyword">val</span> update_thread_in_list : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span></code></dt><dd><p>Given a thread <code>thread</code> and a thread list, updates (replaces) the thread in the list having the same ID as <code>thread</code> with <code>thread</code>.</p></dd></dl><dl><dt class="spec value" id="val-get_last_executed_thread_from_list"><a href="#val-get_last_executed_thread_from_list" class="anchor"></a><code><span class="keyword">val</span> get_last_executed_thread_from_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> option</span></code></dt><dd><p>Given an int representing the number of the last executed statement and a list of threads, returns the thread contained in the given list which was executed last.</p></dd></dl><dl><dt class="spec value" id="val-get_last_executed_par_prg_from_list"><a href="#val-get_last_executed_par_prg_from_list" class="anchor"></a><code><span class="keyword">val</span> get_last_executed_par_prg_from_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <span><span>(<a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a> * <a href="../Program/index.html#type-child_branch">Program.child_branch</a> * int)</span> option</span></code></dt><dd><p>Given an int value representing the last statement's execution counter and a list of waiting threads, scans the thread list and returns a pair <code>Some (prg, branch, ptid)</code> if the <code>Par statement</code> in one of the threads contains the last executed instruction in one of its two programs (indicated by <code>branch</code>), <code>None</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-get_child_threads_from_list"><a href="#val-get_child_threads_from_list" class="anchor"></a><code><span class="keyword">val</span> get_child_threads_from_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a> * <a href="index.html#type-thread">thread</a></code></dt><dd><p>Given an int representing the parent thread ID and a list of threads, returns the threads generated by the given parent thread ID from the list as a pair (thread1, thread2).</p></dd></dl><dl><dt class="spec value" id="val-remove_child_threads_from_list"><a href="#val-remove_child_threads_from_list" class="anchor"></a><code><span class="keyword">val</span> remove_child_threads_from_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span></code></dt><dd><p>Given an int representing the parent thread ID and a list of threads, removes the threads generated by the given parent thread ID from the list and returns it.</p></dd></dl><dl><dt class="spec value" id="val-inc_prev_par_finished_children"><a href="#val-inc_prev_par_finished_children" class="anchor"></a><code><span class="keyword">val</span> inc_prev_par_finished_children : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-inc_prev_par_finished_children"><code>Program.inc_prev_par_finished_children</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-dec_prev_par_finished_children"><a href="#val-dec_prev_par_finished_children" class="anchor"></a><code><span class="keyword">val</span> dec_prev_par_finished_children : <a href="index.html#type-thread">thread</a> <span>&#45;&gt;</span> <a href="index.html#type-thread">thread</a></code></dt><dd><p>This is a wrapper which applies <a href="../Program/index.html#val-dec_prev_par_finished_children"><code>Program.dec_prev_par_finished_children</code></a> to the program contained inside the specified thread parameter.</p></dd></dl><dl><dt class="spec value" id="val-is_thread_in_list"><a href="#val-is_thread_in_list" class="anchor"></a><code><span class="keyword">val</span> is_thread_in_list : int <span>&#45;&gt;</span> <span><a href="index.html#type-thread">thread</a> list</span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Given a thread ID and a list of threads, returns <code>true</code> if a thread having as ID the same value specified in the parameter is found inside the list, <code>false</code> otherwise.</p></dd></dl></div></body></html>