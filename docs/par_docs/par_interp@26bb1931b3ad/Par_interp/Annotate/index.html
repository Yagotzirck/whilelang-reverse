<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Annotate (par_interp@26bb1931b3ad.Par_interp.Annotate)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">par_interp@26bb1931b3ad</a> &#x00BB; <a href="../index.html">Par_interp</a> &#x00BB; Annotate</nav><h1>Module <code>Par_interp.Annotate</code></h1></header><aside><p>A set of auxiliary functions to annotate the original abstract syntax tree.</p></aside><dl><dt class="spec exception" id="exception-Empty_par_prg_block"><a href="#exception-Empty_par_prg_block" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Empty_par_prg_block</span></code></dt><dd><p>Raised whenever a <code>Par</code> statement contains an empty program.</p></dd></dl><dl><dt class="spec exception" id="exception-Empty_prg_block"><a href="#exception-Empty_prg_block" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Empty_prg_block</span></code></dt><dd><p>Raised if the program to be annotated is empty.</p></dd></dl><dl><dt class="spec value" id="val-ann_prg_in_par"><a href="#val-ann_prg_in_par" class="anchor"></a><code><span class="keyword">val</span> ann_prg_in_par : <a href="../Ast/index.html#type-program">Ast.program</a> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a></code></dt><dd><p>Annotates a program inside a <code>Par</code> block. This is an auxiliary function for <a href="index.html#val-ann_stmt"><code>ann_stmt</code></a>, so refer to its description for details.</p></dd></dl><dl><dt class="spec value" id="val-ann_stmt"><a href="#val-ann_stmt" class="anchor"></a><code><span class="keyword">val</span> ann_stmt : <span>s:<a href="../Ast/index.html#type-stmt">Ast.stmt</a></span> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-stmt_ann">Ast_ann.stmt_ann</a></code></dt><dd><p>Annotates a statement.</p><p>An int list (which will keep track of statements' execution order) is added to each statement.</p><p>As for the <code>Par</code> statement:</p><ul><li>In addition to the previously mentioned int list added to all statements, an int scalar to keep track of the number of child threads which finished the execution of the programs inside the <code>Par</code> statement is added as well;</li><li>The statements contained in its two program blocks will be recursively annotated as well, and <code>Par_prg_start</code> - <code>Par_prg_end</code> statements are added at the beginning and at the end of the program respectively, in order to define the programs' boundaries.</li></ul><dl><dt>parameter s</dt><dd><p>The statement to be annotated.</p></dd></dl><dl><dt>returns</dt><dd><p>The annotated statement.</p></dd></dl><dl><dt>raises Empty_par_prg_block</dt><dd><p>in case a program contained inside a <code>Par</code> block is empty.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-ann_prg"><a href="#val-ann_prg" class="anchor"></a><code><span class="keyword">val</span> ann_prg : <span>prg:<a href="../Ast/index.html#type-program">Ast.program</a></span> <span>&#45;&gt;</span> <a href="../Ast_ann/index.html#type-program_ann">Ast_ann.program_ann</a></code></dt><dd><p>Annotates a program (by representing it as a zipper structure, among the other things) and its statements.</p><p>Also, puts <code>Program_start</code> statement at the beginning and <code>Program_end</code> at the end of the program, in order to set the whole program's boundaries.</p><dl><dt>parameter prg</dt><dd><p>The program to be annotated.</p></dd></dl><dl><dt>returns</dt><dd><p>The annotated program.</p></dd></dl><dl><dt>raises Empty_prg_block</dt><dd><p>when the program to annotate (<code>prg</code>) is empty.</p></dd></dl></dd></dl></div></body></html>